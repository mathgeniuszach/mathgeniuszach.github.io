<p>Waiting for player...</p><table><tr><td><button></button></td><td><button></button></td><td><button></button></td></tr><tr><td><button></button></td><td><button></button></td><td><button></button></td></tr><tr><td><button></button></td><td><button></button></td><td><button></button></td></tr></table><button hidden>Play Again</button><style>body{text-align:center;flex-direction:column;justify-content:center;align-items:center;display:flex}table button{color:#000;height:100px;width:100px;font-size:4em}</style><script>const $=document.querySelector.bind(document),$$=document.querySelectorAll.bind(document),p=$("p");let num=0,x=0;const table=$("table > tbody");for(let e=0;e<3;++e)for(let t=0;t<3;++t){const n=table.children[e].children[t].firstElementChild;n.disabled=!0,n.onclick=()=>{p.textContent="Waiting for opponent...";for(let e=0;e<3;++e)for(let t=0;t<3;++t)table.children[e].children[t].firstElementChild.disabled=!0;send("turn",[e,t])}}function cmd_player(e){console.log("player",e),num=e}function cmd_ready(){console.log("ready"),send("ready",{})}function cmd_x(e){console.log("x",e),x=e}function cmd_turn(e,t){console.log("turn",e,t),p.textContent=t==num?"It's your turn! You are "+(num==x?"X":"O"):"Waiting for opponent...";for(let n=0;n<3;++n)for(let o=0;o<3;++o){const l=table.children[n].children[o].firstElementChild;l.textContent=e[n][o]?e[n][o]==x?"X":"O":"",l.disabled=t!=num||0!=e[n][o]}}function cmd_end(e,t){p.textContent=0==t?"It's a tie!":t==num?"You win!":"You lose!";for(let t=0;t<3;++t)for(let n=0;n<3;++n){const o=table.children[t].children[n].firstElementChild;o.textContent=e[t][n]?e[t][n]==x?"X":"O":"",o.disabled=!0}1==num&&($("body > button").hidden=!1)}$("body > button").onclick=e=>{e.target.hidden=!0,send("ready",{})},ready=!0;</script>